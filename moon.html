<!doctype html>
<html lang="en">
<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="I am looking at the moon.">
  <title>I am looking at the moon.</title>
</head>

<body>
    <script>
        function makeid(length) {
            var result = '';
            var url = window.location.href,
                separator = (url.indexOf("?")===-1)?"?":"&",
                newParam = '';
            
            if (url.substr(-5) == ".html") {
                var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
                var charactersLength = characters.length;
                for ( var i = 0; i < length; i++ ) {
                    result += characters.charAt(Math.floor(Math.random() * charactersLength));
                }
                newParam = separator + result;
            } else {
                result = url.substr(-5);
            }
            
            if (result != url.substr(-5)) {
                newUrl=url.replace(newParam,"");
                newUrl+=newParam;
                window.location.href = newUrl;
            }
        }
        
        document.addEventListener("DOMContentLoaded", function() {
            makeid(5);
        });
    </script>
    
    <script>
        let google = require('googleapis');
        let secretKey = require("./client_secret.json");
        let jwtClient = new google.auth.JWT(
            secretKey.client_email,
            null,
            secretKey.private_key,
            ['https://www.googleapis.com/auth/spreadsheets']);
        //authenticate request
        jwtClient.authorize(function (err, tokens) {
            if (err) {
                console.log(err);
                return;
            } else {
                console.log("Successfully connected!");
            }
        });
        
        //Google Sheets API
        let spreadsheetId = 'XXXXX';
        let sheetRange = 'Moon!E1:E4'
        let sheets = google.sheets('v4');
        let values = [
            [
                “00004”,
                “Jack”,
                “Smith”,
                “1115748594”,
                “jack.smith@gmail.com”
            ]
        ];
        
        const sheetResource = {
            values,
        };
        
        sheets.spreadsheets.values.update({
            auth: jwtClient,
            spreadsheetId: spreadsheetId,
            range: sheetRange,
            resource: sheetResource
        }, function (err, response) {
            if (err) {
                console.log('The API returned an error: ' + err);
            } else {
                console.log('Movie list from Google Sheets:');
                for (let row of response.values) {
                    console.log('Title [%s]\t\tRating [%s]', row[0], row[1]);
                }
            }
        });
    </script>
    
    <p>11:48 PM</p>
    
    <input type="text" id="my-input" />
        
    <script>
        let input = document.getElementById('my-input');
        
        let timeout = null;
        
        function updatePage() {
            $.getJSON('https://youngdahle.github.io/moonbase.json', function(data) {
                // Your code to update the page here.
                // `data` is the response JSON, in JavaScript object form.
            });
        }
        
        input.addEventListener('keyup', function (e) {
            clearTimeout(timeout);
            
            timeout = setTimeout(function() {
                document.getElementById('output').innerHTML = input.value;
                input.value = "";
            }, 1000);
        });
    </script>
    
    <p id="output"> </p>
    <p>Copyright Erik Youngdahl 2022</p>
    
    <script>

        });
    </script>
</body>
